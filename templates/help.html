<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Help - local-booru</title>
    <link rel="stylesheet" href="/static/css/styles.css" />
</head>
<body class="help-page">
    <h1>Help & User Guide</h1>
    <p>Welcome to local-booru! This guide explains how to use all the features of the site.</p>

    <!-- Table of Contents -->
    <div class="toc">
        <strong>Table of Contents</strong>
        <ul>
            <li><a href="#uploading">1. Uploading Images</a></li>
            <li><a href="#gallery">2. The Gallery & Searching</a></li>
            <li><a href="#advanced">3. Advanced Management</a></li>
            <li><a href="#cli">4. Command-Line Utilities</a></li>
            <li><a href="#shortcuts">5. Keyboard Shortcuts</a></li>
        </ul>
    </div>

    <!-- Section 1: Uploading -->
    <h2 id="uploading">1. Uploading Images</h2>
    <p>
        The first step is to add images to your collection. Navigate to the <strong><a href="/upload">Upload</a></strong> page to get started.
    </p>
    <ul>
        <li>
            <strong>Selecting Files:</strong> Click the "Select image files" button to open a file dialog. You can select or drag & drop multiple image files at once. A small preview of each selected image will appear.
        </li>
        <li>
            <strong>Initial Tagging:</strong> Before you upload, you can add tags in the "Tags (comma-separated)" box. Every image in the batch will receive these initial tags. This is great for adding an artist's name or a common theme to a set of images.
        </li>
        <li>
            <strong>Uploading:</strong> Click the "Upload" button. The page will show a success message when the process is complete. The system automatically detects and skips any images you've already uploaded.
        </li>
    </ul>

    <!-- Section 2: The Gallery & Searching -->
    <h2 id="gallery">2. The Gallery & Searching</h2>
    <p>
        The <strong><a href="/gallery">Gallery</a></strong> is the main page for viewing your collection. From here, you can browse, search, and inspect your images.
    </p>
    <ul>
        <li>
            <strong>Thumbnail Size:</strong> Use the "Small," "Medium," and "Large" buttons at the top to change the size of the image thumbnails. Your preference is saved in your browser.
        </li>
        <li>
            <strong>Lightbox Viewer:</strong> Clicking on any thumbnail opens a full-size image viewer (a "lightbox"). You can navigate between images using the arrow buttons or your keyboard.
        </li>
        <li>
            <strong>Editing or deleting from the Lightbox:</strong> Inside the lightbox, you will see the image's ID and its current tags. Click the "Edit Tags" button to go to a dedicated page to modify them, or "Delete" to remove it permanently from your collection.
        </li>
    </ul>

    <h3>Using the Search Bar</h3>
    <p>The search bar is the most powerful tool for finding specific images. Hereâ€™s how to use its syntax.</p>
    
    <h4>Basic Search (AND Logic)</h4>
	<p>
		Tags are separated by commas (<code>,</code>) or the word <code>AND</code>. This finds images that have <strong>all</strong> of the specified tags.
	</p>
    <ul class="example-list">
        <li><code>cat, dog</code> - Finds images tagged with both <code>cat</code> AND <code>dog</code>.</li>
		<li><code>cat AND dog</code> - Same as above.</li>
    </ul>

    <h4>Advanced Operators</h4>
    <ul>
        <li>
            <strong>OR Logic:</strong> Use parentheses with a vertical bar (<code>|</code>) or the word <code>OR</code>.
            <ul class="example-list">
                <li><code>(cat|dog)</code> - Finds images with either the <code>cat</code> OR <code>dog</code> tag.</li>
            </ul>
        </li>
        <li>
            <strong>Exclusion (NOT):</strong> To exclude images with a certain tag, prefix it with a hyphen (<code>-</code>).
            <ul class="example-list">
                <li><code>-dog</code> - Finds all images that do NOT have the <code>dog</code> tag.</li>
            </ul>
        </li>
    </ul>

    <h4>Wildcard Search</h4>
    <p>
        Use an asterisk (<code>*</code>) as a wildcard to match parts of a tag.
    </p>
    <ul class="example-list">
        <li><code>cat*</code> - Finds tags starting with "cat," like <code>caterpillar</code> or <code>catgirl</code>.</li>
    </ul>

    <h4>Special Queries</h4>
    <ul class="example-list">
        <li><code>untagged</code> - A special keyword to find all images that have no tags assigned to them.</li>
    </ul>

    <h3>Saved Searches</h3>
    <p>To make searching even faster, the application automatically remembers your searches and allows you to "pin" your favorites.</p>
    <ul>
        <li><strong>Automatic Recent Searches:</strong> The last 10 unique searches you perform are automatically saved as "Recent Searches."</li>
        <li><strong>Pinned Searches:</strong> You can permanently save a complex search by "pinning" it.</li>
        <li><strong>Accessing Searches:</strong> Simply click on an empty search bar on the <strong>Homepage</strong>, <strong>Gallery</strong>, or <strong>Batch Actions</strong> page. A dropdown will appear showing your pinned and recent searches. Clicking one will instantly fill the search bar.</li>
        <li><strong>Managing Searches:</strong> For full control, navigate to the <strong><a href="/saved_searches">Saved Searches</a></strong> page. Here you can view all searches, pin or unpin them, and delete any you no longer need.</li>
    </ul>

    <!-- Section 3: Advanced Management -->
    <h2 id="advanced">3. Advanced Management</h2>
    <p>For power users, the Batch Actions and Tag Manager pages provide tools for large-scale organization.</p>
    
    <h3>Batch Actions</h3>
    <p>The <strong><a href="/batch_actions">Batch Actions</a></strong> page allows you to edit or delete many images at once.</p>
    <ol>
        <li>1. Use the search bar to find the set of images you want to work on.</li>
        <li>2. Select images by clicking on them. Your selection is saved as you navigate between pages.</li>
        <li>3. Use the form at the bottom to choose an action (<strong>Add, Remove, Replace, or Delete</strong>) and specify tags if needed.</li>
        <li>4. Click "Apply Action" to modify all selected images. <strong>Be careful with "Delete Images," as this is permanent!</strong></li>
        <li>5. You can undo the last tag edit (add/remove/replace) with the "Undo Last Tag Edit" button. This does not work for deletions.</li>
    </ol>

    <h3>Tag Manager</h3>
    <p>The <strong><a href="/tag_manager">Tag Manager</a></strong> is for cleaning up the tags themselves, not the images.</p>
    <ul>
        <li>
            <strong>Rename:</strong> Changes a tag's name everywhere it's used (e.g., renaming <code>car</code> to <code>automobile</code>).
        </li>
        <li>
            <strong>Merge:</strong> Combines two tags. All images with the "merge-from" tag will be given the "merge-to" tag, and the old tag will be deleted. This is useful for correcting duplicate tags (e.g., merging <code>cat</code> and <code>kitty</code> into just <code>cat</code>).
        </li>
        <li>
            <strong>Force Delete:</strong> Deletes a tag from the system entirely, removing it from every image it was on. <strong>This can leave images untagged and cannot be undone.</strong>
        </li>
    </ul>
    
    <!-- Section 4: Command-Line Utilities -->
    <h2 id="cli">4. Command-Line Utilities</h2>
    <p>
        Some maintenance tasks are performed using scripts from the command line, not the web interface. You must have terminal access to the server where the application is running to use these tools.
    </p>

    <h3>Exporting Your Collection</h3>
    <p>
        You can create a complete backup of your collection in a single `.zip` file. This is perfect for backups or migrating your collection to another system without losing any data.
    </p>
    <ol>
        <li>Navigate to the application's root directory in your terminal.</li>
        <li>Run the script using the command: <code>python export_collection.py</code></li>
        <li>A file named <code>booru_export.zip</code> will be created, containing all images and a `metadata.json` file with all tag information.</li>
    </ol>
    
    <div class="danger-zone">
        <h3>Danger Zone: Factory Reset</h3>
        <p>
            If you want to completely wipe all data and start over, you can use the provided command-line script. This is a highly destructive and irreversible action that will delete all images, tags, and the entire database.
        </p>
        <h4>How to perform a factory reset:</h4>
        <ol>
            <li>1. <strong>Stop the application server.</strong> This is critical to ensure the database file is not locked.</li>
            <li>2. Navigate to the application's root directory in your terminal.</li>
            <li>3. Run the script using the command: <code>python reset_app.py</code></li>
            <li>4. The script will ask for a final confirmation. You must type <code>reset my booru</code> to proceed.</li>
            <li>5. Once the script is finished, you can restart the application server. It will be in a clean, factory-new state.</li>
        </ol>
    </div>

    <!-- Section 5: Keyboard Shortcuts -->
    <h2 id="shortcuts">5. Keyboard Shortcuts</h2>
    <p>You can navigate the site quickly using your keyboard.</p>
    <ul>
        <li>
            <strong>Gallery Page:</strong>
            <ul>
                <li><code>A</code> or <code>ArrowLeft</code>: Go to the previous page.</li>
                <li><code>D</code> or <code>ArrowRight</code>: Go to the next page.</li>
            </ul>
        </li>
        <li>
            <strong>Lightbox Viewer:</strong>
            <ul>
                <li><code>A</code> or <code>ArrowLeft</code>: View the previous image.</li>
                <li><code>D</code> or <code>ArrowRight</code>: View the next image.</li>
                <li><code>Escape</code>: Close the lightbox.</li>
            </ul>
        </li>
    </ul>

    <nav>
        <a href="/">Home</a>
        <a href="/upload">Upload</a>
        <a href="/gallery">Gallery</a>
        <a href="/batch_actions">Batch Actions</a>
        <a href="/tag_manager">Tag Manager</a>
        <a href="/saved_searches">Saved Searches</a>
    </nav>
</body>
</html>